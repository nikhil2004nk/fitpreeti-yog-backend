### ============================================
### Fitpreeti Yoga API - Complete Test Collection
### Base URL: http://localhost:3000/api/v1
### Authentication: Uses httpOnly cookies (set automatically on login)
### ============================================

@baseUrl = http://localhost:3000/api/v1
@contentType = application/json

### ============================================
### ü©∫ HEALTH CHECK
### ============================================

### Health Check
GET {{baseUrl}}/health

### ============================================
### üîê AUTHENTICATION
### ============================================

### Register a new user
# @name register
POST {{baseUrl}}/auth/register
Content-Type: {{contentType}}

{
  "name": "Test User",
  "email": "test@example.com",
  "phone": "+911234567890",
  "pin": "123456",
  "role": "customer"
}

### Login with phone and PIN
# @name login
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "phone": "+911234567890",
  "pin": "123456"
}

### Refresh Token (uses refresh_token cookie)
POST {{baseUrl}}/auth/refresh

### Get current user profile
GET {{baseUrl}}/auth/profile

### Logout (clears cookies)
POST {{baseUrl}}/auth/logout

### Create Admin User (Admin only - requires admin auth)
POST {{baseUrl}}/auth/admin/create
Content-Type: {{contentType}}

{
  "name": "Admin User",
  "phone": "+919876543211",
  "email": "admin@example.com",
  "pin": "567890"
}

### ============================================
### üë• USERS (Admin Only)
### ============================================

### Get all users (Admin only)
GET {{baseUrl}}/users

### Get user by phone (Admin only)
GET {{baseUrl}}/users/+911234567890

### Update user role (Admin only)
PATCH {{baseUrl}}/users/+911234567890/role
Content-Type: {{contentType}}

{
  "role": "admin"
}

### ============================================
### üèãÔ∏è SERVICES
### ============================================

### Get all services
GET {{baseUrl}}/services

### Get all services filtered by type
GET {{baseUrl}}/services?type=yoga

### Get popular services
GET {{baseUrl}}/services/popular

### Get services by type (path parameter)
GET {{baseUrl}}/services/type/yoga

### Get service by ID
# Replace with actual service ID from Get All Services
GET {{baseUrl}}/services/00000000-0000-0000-0000-000000000000

### Create a new service (Admin only)
# @name createService
POST {{baseUrl}}/services
Content-Type: {{contentType}}

{
  "service_name": "Hatha Yoga",
  "type": "yoga",
  "category": "traditional",
  "description": "Traditional Hatha Yoga practice focusing on physical postures and breathing techniques.",
  "price": 500,
  "duration_minutes": 60,
  "trainer_id": "00000000-0000-0000-0000-000000000000",
  "image_url": "https://example.com/hatha-yoga.jpg",
  "is_active": true
}

### Update a service (Admin only)
# Replace service_id with actual ID
PATCH {{baseUrl}}/services/00000000-0000-0000-0000-000000000000
Content-Type: {{contentType}}

{
  "service_name": "Advanced Hatha Yoga",
  "description": "Advanced level Hatha Yoga with focus on alignment and breath control.",
  "price": 600,
  "duration_minutes": 75,
  "category": "advanced",
  "is_active": true
}

### Delete (deactivate) a service (Admin only)
# Replace service_id with actual ID
DELETE {{baseUrl}}/services/00000000-0000-0000-0000-000000000000

### ============================================
### üßë‚Äçüè´ TRAINERS
### ============================================

### Get all trainers
GET {{baseUrl}}/trainers

### Get trainer by ID
# Replace trainer_id with actual ID
GET {{baseUrl}}/trainers/00000000-0000-0000-0000-000000000000

### Create a new trainer (Admin only)
# @name createTrainer
POST {{baseUrl}}/trainers
Content-Type: {{contentType}}

{
  "name": "Yoga Master",
  "bio": "Certified yoga instructor with 5+ years of experience in Hatha and Vinyasa yoga.",
  "specializations": ["hatha", "vinyasa"],
  "profileImage": "https://example.com/trainers/yoga-master.jpg",
  "certifications": ["RYT 500", "Yoga Alliance Certified"],
  "experienceYears": 5,
  "isActive": true,
  "availability": {
    "monday": [{"start": "09:00", "end": "17:00"}],
    "tuesday": [{"start": "09:00", "end": "17:00"}],
    "wednesday": [{"start": "09:00", "end": "17:00"}],
    "thursday": [{"start": "09:00", "end": "17:00"}],
    "friday": [{"start": "09:00", "end": "17:00"}]
  },
  "socialMedia": {
    "instagram": "@yogamaster",
    "youtube": "yogamaster"
  }
}

### Update a trainer (Admin only)
# Replace trainer_id with actual ID
PUT {{baseUrl}}/trainers/00000000-0000-0000-0000-000000000000
Content-Type: {{contentType}}

{
  "name": "Senior Yoga Master",
  "bio": "Senior certified yoga instructor with 8+ years of experience in Hatha, Vinyasa, and Ashtanga yoga.",
  "specializations": ["hatha", "vinyasa", "ashtanga"],
  "experienceYears": 8,
  "isActive": true
}

### Delete a trainer (Admin only)
# Replace trainer_id with actual ID
DELETE {{baseUrl}}/trainers/00000000-0000-0000-0000-000000000000

### ============================================
### üìÖ CLASS SCHEDULE
### ============================================

### Create a new class schedule (Admin only)
# @name createClassSchedule
POST {{baseUrl}}/class-schedule
Content-Type: {{contentType}}

{
  "title": "Morning Yoga Flow",
  "description": "Energizing morning yoga session",
  "start_time": "2025-01-15T08:00:00.000Z",
  "end_time": "2025-01-15T09:00:00.000Z",
  "max_participants": 15,
  "trainer_id": "00000000-0000-0000-0000-000000000000",
  "service_id": "00000000-0000-0000-0000-000000000000",
  "is_recurring": false
}

### Get all class schedules
GET {{baseUrl}}/class-schedule

### Get class schedules with filters
GET {{baseUrl}}/class-schedule?start_time=2025-01-01T00:00:00.000Z&end_time=2025-01-31T23:59:59.000Z&trainer_id=00000000-0000-0000-0000-000000000000&service_id=00000000-0000-0000-0000-000000000000

### Get a specific class schedule by ID
# Replace schedule_id with actual ID
GET {{baseUrl}}/class-schedule/00000000-0000-0000-0000-000000000000

### Update a class schedule (Admin only)
# Replace schedule_id with actual ID
PUT {{baseUrl}}/class-schedule/00000000-0000-0000-0000-000000000000
Content-Type: {{contentType}}

{
  "start_time": "2025-01-15T10:00:00.000Z",
  "end_time": "2025-01-15T11:00:00.000Z",
  "max_participants": 20,
  "status": "scheduled"
}

### Delete a class schedule (Admin only)
# Replace schedule_id with actual ID
DELETE {{baseUrl}}/class-schedule/00000000-0000-0000-0000-000000000000

### Check trainer availability
# Replace trainer_id with actual ID
GET {{baseUrl}}/class-schedule/trainer/00000000-0000-0000-0000-000000000000/availability?date=2025-01-01T09:00:00.000Z&duration=60

### ============================================
### üìÖ BOOKINGS
### ============================================

### Create a new booking
# @name createBooking
POST {{baseUrl}}/bookings
Content-Type: {{contentType}}

{
  "service_id": "00000000-0000-0000-0000-000000000000",
  "booking_date": "2025-01-15",
  "booking_time": "10:00",
  "full_name": "John Doe",
  "email": "john@example.com",
  "phone": "+919876543210",
  "special_requests": "First time booking, need beginner-friendly session"
}

### Get my bookings
GET {{baseUrl}}/bookings

### Get booking by ID
# Replace booking_id with actual ID
GET {{baseUrl}}/bookings/00000000-0000-0000-0000-000000000000

### Get available time slots for a service
# Replace service_id and date
GET {{baseUrl}}/bookings/available/00000000-0000-0000-0000-000000000000/2025-01-15

### Update booking (Admin only)
# Replace booking_id with actual ID
PATCH {{baseUrl}}/bookings/00000000-0000-0000-0000-000000000000
Content-Type: {{contentType}}

{
  "status": "confirmed"
}

### Delete (cancel) a booking
# Replace booking_id with actual ID
DELETE {{baseUrl}}/bookings/00000000-0000-0000-0000-000000000000

### Get all bookings (Admin only)
GET {{baseUrl}}/bookings/admin/all

### ============================================
### ‚≠ê REVIEWS
### ============================================

### Create a new review
# @name createReview
POST {{baseUrl}}/reviews
Content-Type: {{contentType}}

{
  "rating": 5,
  "comment": "FitPreeti transformed my fitness journey! The instructors are amazing and the classes are so much fun.",
  "reviewer_type": "Zumba Regular",
  "booking_id": "00000000-0000-0000-0000-000000000000"
}

### Get all approved reviews (public)
GET {{baseUrl}}/reviews

### Get all approved reviews (explicit)
GET {{baseUrl}}/reviews/approved

### Get all reviews including pending (public)
GET {{baseUrl}}/reviews?approved=false

### Get pending reviews (Admin only)
GET {{baseUrl}}/reviews/pending

### Get my reviews (authenticated user)
GET {{baseUrl}}/reviews/my-reviews

### Get review by ID
# Replace review_id with actual ID
GET {{baseUrl}}/reviews/00000000-0000-0000-0000-000000000000

### Update a review (Owner or Admin)
# Replace review_id with actual ID
PATCH {{baseUrl}}/reviews/00000000-0000-0000-0000-000000000000
Content-Type: {{contentType}}

{
  "rating": 4,
  "comment": "Updated review comment",
  "reviewer_type": "Yoga Regular"
}

### Approve a review (Admin only)
# Replace review_id with actual ID
PATCH {{baseUrl}}/reviews/00000000-0000-0000-0000-000000000000
Content-Type: {{contentType}}

{
  "is_approved": true
}

### Delete (remove) a review (Owner or Admin)
# Replace review_id with actual ID
DELETE {{baseUrl}}/reviews/00000000-0000-0000-0000-000000000000

### ============================================
### üìù NOTES
### ============================================
### 
### Authentication:
### - Login endpoint sets httpOnly cookies automatically
### - All authenticated endpoints use cookies (no Bearer token needed)
### - Make sure to login first before accessing protected endpoints
### 
### Response Format:
### - Success: { success: true, message: string, data: any, timestamp: string }
### - Error: { success: false, statusCode: number, error: string, message: string | string[], path: string, method: string, timestamp: string }
### 
### UUIDs:
### - Replace all placeholder UUIDs (00000000-0000-0000-0000-000000000000) with actual IDs from responses
### - Copy IDs from GET responses and use them in subsequent requests
### 
### Rate Limits:
### - Register: 5 requests per 15 minutes
### - Login: 5 requests per 15 minutes
### 
### PIN Requirements:
### - PIN must be 6-8 digits
### 
### Review Requirements:
### - Rating must be between 1 and 5
### - Comment is required (max 1000 characters)
### - reviewer_type is optional (e.g., "Zumba Regular", "Yoga Regular")
### - Reviews are not approved by default (need admin approval)
### - Users can only update/delete their own reviews
### - Admins can approve/reject and manage all reviews
### 
### ============================================
