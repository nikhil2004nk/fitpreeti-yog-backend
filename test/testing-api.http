@baseUrl = http://localhost:3000
@contentType = application/json

### 1. Health Check
GET {{baseUrl}}/health

### 2. User Registration & Authentication
### Register a new user
# @name register
POST {{baseUrl}}/auth/register
Content-Type: {{contentType}}

{
  "name": "Test User",
  "email": "test@example.com",
  "phone": "+911234567890",
  "pin": "1234",
  "role": "user"
}

### Login with phone and PIN
# @name login
POST {{baseUrl}}/auth/login
Content-Type: {{contentType}}

{
  "phone": "+911234567890",
  "pin": "1234"
}

### Get access token from login response and set as variable
@accessToken = {{login.response.body.access_token}}
@refreshToken = {{login.response.body.refresh_token}}

### 3. User Profile Management
### Get current user profile
GET {{baseUrl}}/auth/profile
Authorization: Bearer {{accessToken}}

### Update user profile
PATCH {{baseUrl}}/auth/profile
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "name": "Updated Test User",
  "phone_number": "+911234567891"
}

### 4. Refresh Token
POST {{baseUrl}}/auth/refresh
Content-Type: {{contentType}}

{
  "refresh_token": "{{refreshToken}}"
}

### 5. Service Categories (Admin Only)
### Get all service categories
GET {{baseUrl}}/api/v1/service-categories

### Create new service category (Admin)
POST {{baseUrl}}/api/v1/service-categories
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "name": "Yoga",
  "description": "Various yoga classes and sessions"
}

### 6. Trainers
### Get all trainers
GET {{baseUrl}}/api/v1/trainers

### Get trainer by ID
GET {{baseUrl}}/api/v1/trainers/{{trainer_id}}

### 7. Services
### Get all services
GET {{baseUrl}}/api/v1/services

### Get service by ID
GET {{baseUrl}}/api/v1/services/{{service_id}}

### 8. Class Schedules
### Get available class schedules
GET {{baseUrl}}/api/v1/class-schedules?startDate=2025-01-01&endDate=2025-12-31

### Book a class
# @name bookClass
POST {{baseUrl}}/api/v1/bookings
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "class_schedule_id": "{{class_schedule_id}}",
  "notes": "Beginner level, please provide mat"
}

@bookingId = {{bookClass.response.body.id}}

### 9. Bookings
### Get user's bookings
GET {{baseUrl}}/api/v1/bookings
Authorization: Bearer {{accessToken}}

### Get booking by ID
GET {{baseUrl}}/api/v1/bookings/{{bookingId}}
Authorization: Bearer {{accessToken}}

### Cancel booking
PATCH {{baseUrl}}/api/v1/bookings/{{bookingId}}/cancel
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

### 10. Payments
### Process payment for booking
# @name processPayment
POST {{baseUrl}}/api/v1/payments
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "booking_id": "{{bookingId}}",
  "amount": 500.00,
  "payment_method": "credit_card",
  "payment_details": {
    "card_number": "4242424242424242",
    "exp_month": 12,
    "exp_year": 2025,
    "cvc": "123"
  }
}

### 11. Reviews
### Add review for a class
POST {{baseUrl}}/api/v1/reviews
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "class_schedule_id": "{{class_schedule_id}}",
  "rating": 5,
  "comment": "Great class! The instructor was very knowledgeable."
}

### Get reviews for a service
GET {{baseUrl}}/api/v1/services/{{service_id}}/reviews

### 12. Admin Endpoints (Requires Admin Role)
### Get all users (Admin)
GET {{baseUrl}}/api/v1/admin/users
Authorization: Bearer {{accessToken}}

### Create new service (Admin)
POST {{baseUrl}}/api/v1/admin/services
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "name": "Hatha Yoga",
  "description": "Traditional Hatha Yoga session",
  "price": 500,
  "duration_minutes": 60,
  "category_id": "{{category_id}}",
  "trainer_id": "{{trainer_id}}"
}

### Create class schedule (Admin)
POST {{baseUrl}}/api/v1/admin/class-schedules
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "title": "Morning Yoga Flow",
  "description": "Energizing morning yoga session",
  "start_time": "2025-01-15T08:00:00Z",
  "end_time": "2025-01-15T09:00:00Z",
  "max_participants": 15,
  "price": 500,
  "trainer_id": "{{trainer_id}}",
  "service_id": "{{service_id}}",
  "is_recurring": false
}

### 13. Logout
POST {{baseUrl}}/auth/logout
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}
